
name=test
bin=$(name).bin
obj=$(name).o
tar=$(name).c

obj+=start.o

$(bin):$(name)
	arm-none-linux-gnueabi-objcopy -l elf32-littlearm -Obinary $^ $@
$(name):$(obj)
	arm-none-linux-gnueabi-ld -Tled.lds -N $(name).o -o $(name).elf
	#arm-none-linux-gnueabi-ld -Ttext=0x50005000 $^ -o $@
$(obj):$(tar)
	arm-none-linux-gnueabi-gcc -c $^ -o $@

clean:
	rm -f $(bin) $(obj) $(name)


